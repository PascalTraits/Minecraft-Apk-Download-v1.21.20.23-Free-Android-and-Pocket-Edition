name: Update All Markdown Files

on:
  schedule:
    # Runs every 1 minute
    - cron: "*/1 * * * *"

jobs:
  update-md-files:
    runs-on: ubuntu-latest

    steps:
    - name: Checkout repository
      uses: actions/checkout@v3

    - name: Update all .md files
      run: |
        # Append "-" to the end of each .md file
        find . -name "*.md" -exec sh -c 'echo "-" >> "$1"' _ {} \;

    - name: Commit and push changes
      env:
        PAT_TOKEN: ${{ secrets.PAT_TOKEN }}
      run: |
        git config user.name "github-actions[bot]"
        git config user.email "github-actions@github.com"
        git add .
        git commit -m "Automated update: appended '-' to all .md files" || echo "No changes to commit"
        git push https://x-access-token:${{ secrets.PAT_TOKEN }}@github.com/${{ github.repository }}.git
